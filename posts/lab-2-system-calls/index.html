<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.147.1">
    <meta name="generator" content="Relearn 7.6.1+d7685ad3986c906cb10e62854fca7c730df4bf58">
    <meta name="description" content="Lab1 是关于使用系统调用，Lab2则要我们自己写系统调用。
System call tracing (moderate) 题目要求：
In this assignment you will add a system call tracing feature that may help you when debugging later labs. You&#39;ll create a new trace system call that will control tracing. It should take one argument, an integer &#34;mask&#34;, whose bits specify which system calls to trace. For example, to trace the fork system call, a program calls trace(1 &lt;&lt; SYS_fork), where SYS_fork is a syscall number from kernel/syscall.h. You have to modify the xv6 kernel to print out a line when each system call is about to return, if the system call&#39;s number is set in the mask. The line should contain the process id, the name of the system call and the return value; you don&#39;t need to print the system call arguments. The trace system call should enable tracing for the process that calls it and any children that it subsequently forks, but should not affect other processes. 由Lab1我们知道,系统调用的过程是,首先运行syscall函数,然后进入内核态,内核态运行sysproc.c中的系统调用函数. 所有我们首先需要在kernel/sysproc.c中定义一个新的系统调用函数sys_trace。 uint64 sys_trace(void) { int mask; // 系统调用参数 if(argint(0,&amp;mask) &lt; 0){ // 通过argint函数获取参数 // 如果参数错误，返回-1 return -1; } struct proc *p = myproc(); // 获取当前进程 p -&gt; traceMask = mask; // 设置进程的traceMask return 0; }在这个函数中我们会获取函数参数,然后设置proc结构体的traceMask字段。因为每个系统调用的信息都可能会被打印，而是否打印是由traceMask字段控制的。所有具体的打印代码应该放在syscall函数中,因为每个系统调用都必须经过该函数。 所以接下来在syscall函数中加入打印代码:">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Lab 2: System Calls :: Pluto417-Qing&#39;s Blog">
    <meta name="twitter:description" content="Lab1 是关于使用系统调用，Lab2则要我们自己写系统调用。
System call tracing (moderate) 题目要求：
In this assignment you will add a system call tracing feature that may help you when debugging later labs. You&#39;ll create a new trace system call that will control tracing. It should take one argument, an integer &#34;mask&#34;, whose bits specify which system calls to trace. For example, to trace the fork system call, a program calls trace(1 &lt;&lt; SYS_fork), where SYS_fork is a syscall number from kernel/syscall.h. You have to modify the xv6 kernel to print out a line when each system call is about to return, if the system call&#39;s number is set in the mask. The line should contain the process id, the name of the system call and the return value; you don&#39;t need to print the system call arguments. The trace system call should enable tracing for the process that calls it and any children that it subsequently forks, but should not affect other processes. 由Lab1我们知道,系统调用的过程是,首先运行syscall函数,然后进入内核态,内核态运行sysproc.c中的系统调用函数. 所有我们首先需要在kernel/sysproc.c中定义一个新的系统调用函数sys_trace。 uint64 sys_trace(void) { int mask; // 系统调用参数 if(argint(0,&amp;mask) &lt; 0){ // 通过argint函数获取参数 // 如果参数错误，返回-1 return -1; } struct proc *p = myproc(); // 获取当前进程 p -&gt; traceMask = mask; // 设置进程的traceMask return 0; }在这个函数中我们会获取函数参数,然后设置proc结构体的traceMask字段。因为每个系统调用的信息都可能会被打印，而是否打印是由traceMask字段控制的。所有具体的打印代码应该放在syscall函数中,因为每个系统调用都必须经过该函数。 所以接下来在syscall函数中加入打印代码:">
    <meta property="og:url" content="http://localhost:1313/posts/lab-2-system-calls/index.html">
    <meta property="og:site_name" content="Pluto417-Qing&#39;s Blog">
    <meta property="og:title" content="Lab 2: System Calls :: Pluto417-Qing&#39;s Blog">
    <meta property="og:description" content="Lab1 是关于使用系统调用，Lab2则要我们自己写系统调用。
System call tracing (moderate) 题目要求：
In this assignment you will add a system call tracing feature that may help you when debugging later labs. You&#39;ll create a new trace system call that will control tracing. It should take one argument, an integer &#34;mask&#34;, whose bits specify which system calls to trace. For example, to trace the fork system call, a program calls trace(1 &lt;&lt; SYS_fork), where SYS_fork is a syscall number from kernel/syscall.h. You have to modify the xv6 kernel to print out a line when each system call is about to return, if the system call&#39;s number is set in the mask. The line should contain the process id, the name of the system call and the return value; you don&#39;t need to print the system call arguments. The trace system call should enable tracing for the process that calls it and any children that it subsequently forks, but should not affect other processes. 由Lab1我们知道,系统调用的过程是,首先运行syscall函数,然后进入内核态,内核态运行sysproc.c中的系统调用函数. 所有我们首先需要在kernel/sysproc.c中定义一个新的系统调用函数sys_trace。 uint64 sys_trace(void) { int mask; // 系统调用参数 if(argint(0,&amp;mask) &lt; 0){ // 通过argint函数获取参数 // 如果参数错误，返回-1 return -1; } struct proc *p = myproc(); // 获取当前进程 p -&gt; traceMask = mask; // 设置进程的traceMask return 0; }在这个函数中我们会获取函数参数,然后设置proc结构体的traceMask字段。因为每个系统调用的信息都可能会被打印，而是否打印是由traceMask字段控制的。所有具体的打印代码应该放在syscall函数中,因为每个系统调用都必须经过该函数。 所以接下来在syscall函数中加入打印代码:">
    <meta property="og:locale" content="zh_cn">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Posts">
    <meta property="article:published_time" content="2025-05-13T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-05-13T00:00:00+00:00">
    <meta property="article:tag" content="实验">
    <meta property="article:tag" content="探索">
    <meta itemprop="name" content="Lab 2: System Calls :: Pluto417-Qing&#39;s Blog">
    <meta itemprop="description" content="Lab1 是关于使用系统调用，Lab2则要我们自己写系统调用。
System call tracing (moderate) 题目要求：
In this assignment you will add a system call tracing feature that may help you when debugging later labs. You&#39;ll create a new trace system call that will control tracing. It should take one argument, an integer &#34;mask&#34;, whose bits specify which system calls to trace. For example, to trace the fork system call, a program calls trace(1 &lt;&lt; SYS_fork), where SYS_fork is a syscall number from kernel/syscall.h. You have to modify the xv6 kernel to print out a line when each system call is about to return, if the system call&#39;s number is set in the mask. The line should contain the process id, the name of the system call and the return value; you don&#39;t need to print the system call arguments. The trace system call should enable tracing for the process that calls it and any children that it subsequently forks, but should not affect other processes. 由Lab1我们知道,系统调用的过程是,首先运行syscall函数,然后进入内核态,内核态运行sysproc.c中的系统调用函数. 所有我们首先需要在kernel/sysproc.c中定义一个新的系统调用函数sys_trace。 uint64 sys_trace(void) { int mask; // 系统调用参数 if(argint(0,&amp;mask) &lt; 0){ // 通过argint函数获取参数 // 如果参数错误，返回-1 return -1; } struct proc *p = myproc(); // 获取当前进程 p -&gt; traceMask = mask; // 设置进程的traceMask return 0; }在这个函数中我们会获取函数参数,然后设置proc结构体的traceMask字段。因为每个系统调用的信息都可能会被打印，而是否打印是由traceMask字段控制的。所有具体的打印代码应该放在syscall函数中,因为每个系统调用都必须经过该函数。 所以接下来在syscall函数中加入打印代码:">
    <meta itemprop="datePublished" content="2025-05-13T00:00:00+00:00">
    <meta itemprop="dateModified" content="2025-05-13T00:00:00+00:00">
    <meta itemprop="wordCount" content="563">
    <meta itemprop="keywords" content="实验,探索">
    <title>Lab 2: System Calls :: Pluto417-Qing&#39;s Blog</title>
    <link href="/posts/lab-2-system-calls/index.xml" rel="alternate" type="application/rss+xml" title="Lab 2: System Calls :: Pluto417-Qing&#39;s Blog">
    <link href="/posts/lab-2-system-calls/index.print.html" rel="alternate" type="text/html" title="Lab 2: System Calls :: Pluto417-Qing&#39;s Blog">
    <link href="/images/logo.svg?1747202925" rel="icon" type="image/svg+xml">
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1747202925" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1747202925" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1747202925" rel="stylesheet">
    <link href="/css/theme.css?1747202925" rel="stylesheet">
    <link href="/css/format-html.css?1747202925" rel="stylesheet" id="R-format-style">
    <link href="/css/auto-complete/auto-complete.min.css?1747202925" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1747202925" defer></script>
    <script src="/js/lunr/lunr.min.js?1747202925" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1747202925" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1747202925" defer></script>
    <script src="/js/lunr/lunr.zh.min.js?1747202925" defer></script>
    <script src="/js/search.js?1747202925" defer></script>
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/posts\/lab-2-system-calls\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.relearn.contentLangs=['zh'];
      window.relearn.index_js_url="/searchindex.zh-cn.js?1747202925";
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // variant stuff
      window.relearn.themevariants = [ 'auto', 'relearn-light', 'relearn-dark' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `复制到剪贴板`;
      window.T_Copied_to_clipboard = `复制到剪贴板！`;
      window.T_Copy_link_to_clipboard = `将链接复制到剪贴板`;
      window.T_Link_copied_to_clipboard = `链接复制到剪贴板！`;
      window.T_Reset_view = `重置视图`;
      window.T_View_reset = `查看重置！`;
      window.T_No_results_found = `找不到"{0}"的结果`;
      window.T_N_results_found = `为"{0}"找到 {1} 个结果`;
    </script>
    <link href="/css/custom.css?1747202925" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/posts/lab-2-system-calls/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="导航 (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="目录 (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#system-call-tracing-moderate">System call tracing (moderate)</a></li>
        <li><a href="#sysinfo-moderate">Sysinfo (moderate)</a></li>
        <li><a href="#测评记录">测评记录</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">Hello World</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/posts/index.html"><span itemprop="name">Posts</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/posts/lab/index.html"><span itemprop="name">6.s081 xv6 Lab</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Lab 2: System Calls</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/posts/lab-2-system-calls/index.print.html" title="打印整章 (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/posts/lab-1unix-utilities/index.html" title="Lab 1：Unix Utilities (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/posts/svg/index.html" title="SVG学习笔记 (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="更多"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable posts" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="/tags/%E5%AE%9E%E9%AA%8C/index.html">实验</a></li>
    <li><a class="term-link" href="/tags/%E6%8E%A2%E7%B4%A2/index.html">探索</a></li>
  </ul>
</div>
  </header>

<h1 id="lab-2-system-calls">Lab 2: System Calls</h1>

<p>Lab1 是关于使用系统调用，Lab2则要我们自己写系统调用。</p>
<h3 id="system-call-tracing-moderate">System call tracing (moderate)</h3>
<div style="background-color:rgb(15, 184, 251); border-left: 4px solid rgb(212, 251, 15); padding: 15px; margin: 20px 0; border-radius: 4px;">
<strong>题目要求：</strong><br>
In this assignment you will add a system call tracing feature that may help you when debugging later labs. You'll create a new trace system call that will control tracing. It should take one argument, an integer "mask", whose bits specify which system calls to trace. For example, to trace the fork system call, a program calls trace(1 << SYS_fork), where SYS_fork is a syscall number from kernel/syscall.h. You have to modify the xv6 kernel to print out a line when each system call is about to return, if the system call's number is set in the mask. The line should contain the process id, the name of the system call and the return value; you don't need to print the system call arguments. The trace system call should enable tracing for the process that calls it and any children that it subsequently forks, but should not affect other processes.
</div>
由Lab1我们知道,系统调用的过程是,首先运行syscall函数,然后进入内核态,内核态运行sysproc.c中的系统调用函数.
所有我们首先需要在kernel/sysproc.c中定义一个新的系统调用函数sys_trace。
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">uint64</span>
</span></span><span class="line"><span class="cl"><span class="nf">sys_trace</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">mask</span><span class="p">;</span> <span class="c1">// 系统调用参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span><span class="p">(</span><span class="nf">argint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">mask</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">){</span> <span class="c1">// 通过argint函数获取参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 如果参数错误，返回-1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">struct</span> <span class="n">proc</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="nf">myproc</span><span class="p">();</span> <span class="c1">// 获取当前进程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">traceMask</span> <span class="o">=</span> <span class="n">mask</span><span class="p">;</span> <span class="c1">// 设置进程的traceMask
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>在这个函数中我们会获取函数参数,然后设置proc结构体的traceMask字段。因为每个系统调用的信息都可能会被打印，而是否打印是由traceMask字段控制的。所有具体的打印代码应该放在syscall函数中,因为每个系统调用都必须经过该函数。
所以接下来在syscall函数中加入打印代码:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">void</span>
</span></span><span class="line"><span class="cl"><span class="nf">syscall</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">num</span><span class="p">,</span> <span class="n">mask</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span> <span class="o">*</span><span class="n">syscallNames</span><span class="p">[</span><span class="mi">23</span><span class="p">]</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;&#34;</span><span class="p">,</span><span class="s">&#34;fork&#34;</span><span class="p">,</span> <span class="s">&#34;exit&#34;</span><span class="p">,</span> <span class="s">&#34;wait&#34;</span><span class="p">,</span> <span class="s">&#34;pipe&#34;</span><span class="p">,</span> <span class="s">&#34;read&#34;</span><span class="p">,</span> <span class="s">&#34;kill&#34;</span><span class="p">,</span><span class="s">&#34;exec&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fstat&#34;</span><span class="p">,</span> <span class="s">&#34;chdir&#34;</span><span class="p">,</span> <span class="s">&#34;dup&#34;</span><span class="p">,</span> <span class="s">&#34;getpid&#34;</span><span class="p">,</span> <span class="s">&#34;sbrk&#34;</span><span class="p">,</span> <span class="s">&#34;sleep&#34;</span><span class="p">,</span> <span class="s">&#34;uptime&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;open&#34;</span><span class="p">,</span> <span class="s">&#34;write&#34;</span><span class="p">,</span> <span class="s">&#34;mknod&#34;</span><span class="p">,</span> <span class="s">&#34;unlink&#34;</span><span class="p">,</span> <span class="s">&#34;link&#34;</span><span class="p">,</span> <span class="s">&#34;mkdir&#34;</span><span class="p">,</span> <span class="s">&#34;close&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;trace&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span> <span class="c1">// 系统调用名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">struct</span> <span class="n">proc</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="nf">myproc</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="n">num</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">trapframe</span><span class="o">-&gt;</span><span class="n">a7</span><span class="p">;</span> <span class="c1">// 获取系统调用编号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span><span class="p">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="nf">NELEM</span><span class="p">(</span><span class="n">syscalls</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">syscalls</span><span class="p">[</span><span class="n">num</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">-&gt;</span><span class="n">trapframe</span><span class="o">-&gt;</span><span class="n">a0</span> <span class="o">=</span> <span class="n">syscalls</span><span class="p">[</span><span class="n">num</span><span class="p">]();</span> <span class="c1">// 执行系统调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">mask</span> <span class="o">=</span> <span class="n">p</span> <span class="o">-&gt;</span> <span class="n">traceMask</span><span class="p">;</span> <span class="c1">// 获取traceMask
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">mask</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">num</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">)){</span> <span class="c1">// 如果traceMask不为-1且num在mask中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d: syscall %s -&gt; %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">,</span><span class="n">syscallNames</span><span class="p">[</span><span class="n">num</span><span class="p">],</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">trapframe</span><span class="o">-&gt;</span><span class="n">a0</span><span class="p">);</span> <span class="c1">// 打印系统调用信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d %s: unknown sys call %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">p</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">,</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span> <span class="c1">// 打印错误信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">p</span><span class="o">-&gt;</span><span class="n">trapframe</span><span class="o">-&gt;</span><span class="n">a0</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// 设置返回值为-1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>然后在kernel/proc.c中的fork函数中加入下面一行代码,将父进程的traceMask复制到子进程中:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">np</span><span class="o">-&gt;</span><span class="n">traceMask</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">traceMask</span><span class="p">;</span></span></span></code></pre></div>
<h3 id="sysinfo-moderate">Sysinfo (moderate)</h3>
<div style="background-color:rgb(15, 184, 251); border-left: 4px solid rgb(212, 251, 15); padding: 15px; margin: 20px 0; border-radius: 4px;">
<strong>题目要求：</strong><br>
In this assignment you will add a system call, sysinfo, that collects information about the running system. The system call takes one argument: a pointer to a struct sysinfo (see kernel/sysinfo.h). The kernel should fill out the fields of this struct: the freemem field should be set to the number of bytes of free memory, and the nproc field should be set to the number of processes whose state is not UNUSED. We provide a test program sysinfotest; you pass this assignment if it prints "sysinfotest: OK".
</div>
<p>首先查看struct sysinfo的定义:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">sysinfo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">uint64</span> <span class="n">freemem</span><span class="p">;</span>   <span class="c1">// amount of free memory (bytes)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">uint64</span> <span class="n">nproc</span><span class="p">;</span>     <span class="c1">// number of process
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span></span></span></code></pre></div>
<p>接下来需要在kernel/sysproc.c中定义sys_sysinfo函数,函数需要完成两个任务,首先如何获取空闲内存的值，
第二个任务如何获取空闲的进程数量。</p>
<p>为获取空闲的内存数量,在kernel/kalloc.c中定义一个函数calFreeMem,该函数会遍历空闲链表,并计算空闲内存大小。</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">uint64</span> 
</span></span><span class="line"><span class="cl"><span class="nf">calFreeMem</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">struct</span> <span class="n">run</span> <span class="o">*</span><span class="n">r</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">uint64</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">acquire</span><span class="p">(</span><span class="o">&amp;</span><span class="n">kmem</span><span class="p">.</span><span class="n">lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">r</span> <span class="o">=</span> <span class="n">kmem</span><span class="p">.</span><span class="n">freelist</span><span class="p">;</span> <span class="c1">// 获取空闲链表头
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">while</span><span class="p">(</span><span class="n">r</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">num</span> <span class="o">+=</span> <span class="n">PGSIZE</span><span class="p">;</span> <span class="c1">// 累加空闲页大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span> <span class="c1">// 指向下一个空闲页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nf">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">kmem</span><span class="p">.</span><span class="n">lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">num</span><span class="p">;</span> <span class="c1">// 返回空闲内存大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
<p>为获取空闲的进程数量,在pro.c中定义一个辅助函数calUnusedProc,该函数会遍历proc数组,并计算UNSED状态的进程数量。</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="nf">calUnusedProc</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">struct</span> <span class="n">proc</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">nums</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">for</span><span class="p">(</span><span class="n">p</span> <span class="o">=</span> <span class="n">proc</span><span class="p">;</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="o">&amp;</span><span class="n">proc</span><span class="p">[</span><span class="n">NPROC</span><span class="p">];</span> <span class="n">p</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 遍历所有进程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">acquire</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">!=</span> <span class="n">UNUSED</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 如果进程状态不是UNUSED，则计数器加1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">nums</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">nums</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>最后仿照kernel/file.c中的filestat函数,将struct sysinfo复制会用户空间:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">if</span><span class="p">(</span><span class="nf">copyout</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">pagetable</span><span class="p">,</span> <span class="n">sys</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">syif</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">syif</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// 将sysinfo结构体复制到用户空间      
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// 如果复制失败，返回-1
</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">uint64</span>
</span></span><span class="line"><span class="cl"><span class="nf">sys_sysinfo</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">struct</span> <span class="n">sysinfo</span> <span class="n">syif</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">struct</span> <span class="n">proc</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="nf">myproc</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="n">uint64</span> <span class="n">sys</span><span class="p">;</span> <span class="c1">// user pointer to struct sysinfo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span><span class="p">(</span><span class="nf">argaddr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sys</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// 通过argaddr函数获取参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1">// set the value of struct sysinfo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">syif</span><span class="p">.</span><span class="n">nproc</span> <span class="o">=</span> <span class="nf">calUnusedProc</span><span class="p">();</span> <span class="c1">// 计算未使用进程数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">syif</span><span class="p">.</span><span class="n">freemem</span> <span class="o">=</span> <span class="nf">calFreeMem</span><span class="p">();</span> <span class="c1">// 计算空闲内存
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">  <span class="k">if</span><span class="p">(</span><span class="nf">copyout</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">pagetable</span><span class="p">,</span> <span class="n">sys</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">syif</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">syif</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// 将sysinfo结构体复制到用户空间      
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// 如果复制失败，返回-1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<h3 id="测评记录">测评记录</h3>



<figure class="figure-container">
    <img src="/images/lab2/Lab2-grading.png" alt="syscall" class="clickable-image">
    
</figure>



<style>
.figure-container {
    cursor: pointer;
    display: block;
    text-align: center;
    margin: 1em 0;
    width: 400px;
    height: 200px;
    margin-left: auto;
    margin-right: auto;
    background-color: #f8f9fa;
    border-radius: 4px;
    overflow: hidden;
}

.figure-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    padding: 10px;
}

.figure-container figcaption {
    margin-top: 0.5em;
    font-size: 0.9em;
    color: #666;
    text-align: center;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.9);
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}

.modal.show {
    opacity: 1;
}

.modal-content {
    margin: auto;
    display: block;
    max-width: 90%;
    max-height: 90%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.7);
    transition: transform 0.3s ease-in-out;
    object-fit: contain;
}

.modal.show .modal-content {
    transform: translate(-50%, -50%) scale(1);
}

.close {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.3s;
}

.close:hover {
    opacity: 1;
}

.clickable-image {
    transition: transform 0.2s;
}

.clickable-image:hover {
    transform: scale(1.02);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const images = document.querySelectorAll('.clickable-image');
    
    images.forEach(function(img) {
        img.addEventListener('click', function(e) {
            e.preventDefault();
            openImageModal(this);
        });
    });
});

function openImageModal(img) {
    var modal = document.createElement('div');
    modal.className = 'modal';
    
    var modalImg = document.createElement('img');
    modalImg.className = 'modal-content';
    modalImg.src = img.src;
    modalImg.alt = img.alt;
    
    var closeBtn = document.createElement('span');
    closeBtn.className = 'close';
    closeBtn.innerHTML = '&times;';
    
    closeBtn.onclick = function() {
        closeModal(modal);
    }
    
    modal.onclick = function(event) {
        if (event.target === modal) {
            closeModal(modal);
        }
    }
    
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeModal(modal);
        }
    });
    
    modal.appendChild(modalImg);
    modal.appendChild(closeBtn);
    document.body.appendChild(modal);
    
    requestAnimationFrame(function() {
        modal.style.display = 'block';
        requestAnimationFrame(function() {
            modal.classList.add('show');
        });
    });
}

function closeModal(modal) {
    modal.classList.remove('show');
    setTimeout(function() {
        if (modal.parentNode) {
            modal.parentNode.removeChild(modal);
        }
    }, 300);
}
</script>
 


  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> May 13, 2025
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<div id="logo">
    <img src="/images/avatar.jpg" alt="Pluto417-Qing&#39;s Blog" style="width: 100%; height: 100%; object-fit: cover;" />
</div>
<div class="brand">Pluto417-Qing&#39;s Blog</div> 
        </div>
        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="搜索 (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">搜索</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="搜索...">
            <button class="search-clear" type="button" data-search-clear="" title="清除搜索"><i class="fas fa-times" title="清除搜索"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/index.html"><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="parent " data-nav-id="/posts/index.html"><a class="padding" href="/posts/index.html">Posts</a><ul id="R-subsections-b4e55eb7e39db1aee6d02808a2267090" class="collapsible-menu">
            <li class="parent alwaysopen " data-nav-id="/posts/lab/index.html"><a class="padding" href="/posts/lab/index.html">6.s081 xv6 Lab</a><ul id="R-subsections-25f9a066d4bbebb7f2d5f227781af25b" class="collapsible-menu">
            <li class="" data-nav-id="/posts/lab-1unix-utilities/index.html"><a class="padding" href="/posts/lab-1unix-utilities/index.html">Lab 1：Unix Utilities</a></li>
            <li class="active " data-nav-id="/posts/lab-2-system-calls/index.html"><a class="padding" href="/posts/lab-2-system-calls/index.html">Lab 2: System Calls</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/posts/svg/index.html"><a class="padding" href="/posts/svg/index.html">SVG学习笔记</a><ul id="R-subsections-0d2a27fa5c684f0aec9fea259d4de29a" class="collapsible-menu"></ul></li></ul></li>
            <li class="" data-nav-id="/about/index.html"><a class="padding" href="/about/index.html">关于我</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <div class="nav-title padding">更多</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="https://github.com/Pluto417-Qing"><a class="padding" href="https://github.com/Pluto417-Qing" rel="external" target="_blank"><i class='fab fa-github'></i> GitHub</a></li>
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
            <li class="R-variantswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-paint-brush"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-variant">主题</label>
                  <select id="R-select-variant">
                    <option id="R-select-variant-auto" value="auto" selected>Auto</option>
                    <option id="R-select-variant-relearn-light" value="relearn-light">Relearn Light</option>
                    <option id="R-select-variant-relearn-dark" value="relearn-dark">Relearn Dark</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
              <script>window.relearn.markVariant();</script>
            </li>
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/js/clipboard/clipboard.min.js?1747202925" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1747202925" defer></script>
    <script src="/js/js-yaml/js-yaml.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-color.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-drag.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-ease.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-selection.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-timer.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-transition.min.js?1747202925" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1747202925" defer></script>
    <script src="/js/mermaid/mermaid.min.js?1747202925" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{}");
    </script>
    <script src="/js/theme.js?1747202925" defer></script>
  </body>
</html>
